var v=Object.defineProperty;var D=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var g=(e,a,t)=>a in e?v(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,w=(e,a)=>{for(var t in a||(a={}))x.call(a,t)&&g(e,t,a[t]);if(D)for(var t of D(a))M.call(a,t)&&g(e,t,a[t]);return e};var p=(e,a,t)=>new Promise((n,o)=>{var c=s=>{try{u(t.next(s))}catch(l){o(l)}},i=s=>{try{u(t.throw(s))}catch(l){o(l)}},u=s=>s.done?n(s.value):Promise.resolve(s.value).then(c,i);u((t=t.apply(e,a)).next())});import{B as A,n as S}from"./useForm.64137a1f.js";import{B as P,a as C}from"./index.29932cc5.js";import{c as B,bS as R,e9 as d,ea as E,az as N,a as O,v as b,f as k,i as f,aB as y,o as q,j as L,B as $,n as K,aC as j}from"./index.c8efd86c.js";import{v as U,w as z,S as V}from"./dict.b085f5a7.js";import{T as G}from"./index.8f1c0509.js";const{t:F}=B(),re=[{title:"\u79DF\u6237ID",dataIndex:"tenantKey",ellipsis:!0},{title:"\u79DF\u6237\u540D\u79F0",dataIndex:"tenantName",ellipsis:!0},{title:"\u5730\u533A",dataIndex:"locale",ellipsis:!0,customRender:({text:e})=>z.get(e)},{title:"\u57DF\u540D",dataIndex:"domain",ellipsis:!0},{title:"\u72B6\u6001",dataIndex:"status",ellipsis:!0,customRender:({record:e})=>{const t=e.status===V.NORMAL,n=t?"green":"red",o=F(t?"common.enable":"common.disable");return R(G,{color:n},()=>o)}},{title:"\u521B\u5EFA\u4EBA",dataIndex:"createBy",ellipsis:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",ellipsis:!0,sorter:!0},{title:"\u66F4\u65B0\u4EBA",dataIndex:"updateBy",ellipsis:!0},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"updateTime",ellipsis:!0}],oe=[{field:"tenantKey",label:"\u79DF\u6237ID",component:"InputNumber",colProps:{span:8}},{field:"tenantName",label:"\u79DF\u6237\u540D\u79F0",component:"Input",colProps:{span:8}}],H=[{field:"tenantKey",label:"\u79DF\u6237ID",component:"InputNumber",required:!0,colProps:{lg:24,md:24}},{field:"tenantName",label:"\u79DF\u6237\u540D\u79F0",component:"Input",required:!0},{field:"locale",label:"\u5730\u533A",component:"Select",required:!0,componentProps:{options:U}},{field:"domain",label:"\u57DF\u540D",component:"InputTextArea",required:!0,componentProps:{rows:3,placeholder:'\u652F\u6301\u591A\u6761\uFF0C\u7528\u82F1\u6587";"\u5206\u9694'}},{field:"remarks",label:F("common.remarks"),component:"InputTextArea",componentProps:{rows:3},required:!1}];function ue(e){return d.post({url:"/sys/tenant/query",params:e},{errorMessageMode:"message"})}function W(e){return d.post({url:"/sys/tenant/save",params:e},{errorMessageMode:"message"})}function J(e){return d.post({url:"/sys/tenant/update",params:e},{errorMessageMode:"message"})}function ie(e){return d.delete({url:"/sys/tenant/delete",headers:{"Content-Type":E.FORM_URLENCODED},params:{id:e}},{errorMessageMode:"message"})}const Q=O({name:"TenantDrawer",components:{BasicDrawer:P,BasicForm:A},emits:["success","register"],setup(e,{emit:a}){const{t}=B(),n=b(!0),o=b(""),[c,{resetFields:i,setFieldsValue:u,updateSchema:s,validate:l}]=S({labelWidth:100,schemas:H,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[I,{setDrawerProps:m,closeDrawer:T}]=C(r=>p(this,null,function*(){yield i(),m({confirmLoading:!1}),n.value=!!(r!=null&&r.isUpdate),yield s({field:"tenantKey",dynamicDisabled:!1}),f(n)&&(yield u(w({},r.record)),yield s({field:"tenantKey",dynamicDisabled:!0}),o.value=r.record.id)})),h=k(()=>f(n)?t("common.editText"):t("common.createText"));function _(){return p(this,null,function*(){try{const r=yield l();m({confirmLoading:!0}),f(n)?(r.id=o.value,yield J(r)):yield W(r),T(),a("success")}finally{m({confirmLoading:!1})}})}return{registerDrawer:I,drawerForm:c,getTitle:h,handleSubmit:_}}});function X(e,a,t,n,o,c){const i=y("BasicForm"),u=y("BasicDrawer");return q(),L(u,j(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:$(()=>[K(i,{onRegister:e.drawerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var Y=N(Q,[["render",X]]),le=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{Y as T,le as a,re as c,ie as d,ue as g,oe as s};
