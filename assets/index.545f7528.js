import{B as f,u as b}from"./useTable.2dfc64b8.js";import{T as g}from"./useForm.64137a1f.js";import h from"./OperationLogDrawer.813b6408.js";import{m as T,g as B,h as F,j as S,B as p,k as w,n as E,o as I}from"./dict.b085f5a7.js";import{dA as D,bS as m,az as P,a as y,c as O,dg as Y,eO as x,aB as c,o as R,h as L,n as d,B as A,eP as M}from"./index.c8efd86c.js";import{T as C}from"./index.8f1c0509.js";import{u as _}from"./index.29932cc5.js";import"./index.f0acda50.js";import"./index.17fa07c8.js";import"./index.95f8610f.js";import"./index.1cc2df02.js";import"./index.ae0eca88.js";import"./useSize.822cfd2a.js";import"./useWindowSizeFn.569f2c34.js";import"./useContentViewHeight.833d113a.js";import"./ArrowLeftOutlined.8ce689d7.js";import"./index.e7beea07.js";import"./index.b775b83d.js";import"./get.a8e0dbdb.js";import"./index.eb75c359.js";import"./FullscreenOutlined.5ec4a1b8.js";import"./index.59448792.js";import"./sortable.esm.c081a59d.js";import"./RedoOutlined.b14ae1e3.js";import"./scrollTo.877bd4fa.js";import"./index.93134645.js";import"./index.8a182ce2.js";import"./index.5bccfa61.js";import"./index.d99ed209.js";import"./_baseIteratee.813ccf6c.js";import"./index.650ee6e3.js";import"./useRefs.76e09c0b.js";import"./download.b01f8fdc.js";import"./index.a13d6ad9.js";import"./index.4c128a7b.js";import"./uniqBy.8070035d.js";import"./index.808349b6.js";import"./index.5f5435f2.js";const H=[{title:"\u8FFD\u8E2AID",dataIndex:"traceId",ellipsis:!0},{title:"\u7CFB\u7EDF\u6A21\u5757",dataIndex:"module",ellipsis:!0,customRender:({text:e})=>m(C,{color:"blue"},()=>S.get(e))},{title:"\u64CD\u4F5C\u7C7B\u578B",dataIndex:"businessType",ellipsis:!0,customRender:({record:e})=>{const t=e.businessType,o=t===(p.DELETE||p.UNLOCK||p.CLOSE_GOOGLE_VERIFY)?"warning":"success",s=w.get(t);return m(C,{color:o},()=>s)}},{title:"\u64CD\u4F5C\u72B6\u6001",dataIndex:"businessStatus",ellipsis:!0,customRender:({record:e})=>{const t=e.businessStatus,o=t===E.SUCCESS?"success":"error",s=I.get(t);return m(C,{color:o},()=>s)}},{title:"\u64CD\u4F5C\u4EBA\u5458",dataIndex:"createBy",ellipsis:!0},{title:"\u6240\u5C5E\u90E8\u95E8",dataIndex:"depName",ellipsis:!0},{title:"\u64CD\u4F5CIP",dataIndex:"host",ellipsis:!0},{title:"\u64CD\u4F5C\u5730\u70B9",dataIndex:"location",ellipsis:!0},{title:"\u64CD\u4F5C\u65F6\u95F4",dataIndex:"createTime",ellipsis:!0}],k=[{field:"timeRange",label:"\u64CD\u4F5C\u65F6\u95F4",component:"RangePicker",defaultValue:[D().startOf("month").format("YYYY-MM-DD HH:mm:ss"),D().endOf("month").format("YYYY-MM-DD HH:mm:ss")],componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss",showTime:!0},colProps:{span:8}},{field:"createBy",label:"\u64CD\u4F5C\u4EBA\u5458",component:"Input",colProps:{span:8}},{field:"module",label:"\u7CFB\u7EDF\u6A21\u5757",component:"Select",componentProps:{options:T},colProps:{span:8}},{field:"typeArray",label:"\u64CD\u4F5C\u7C7B\u578B",component:"Select",componentProps:{mode:"multiple",options:B},colProps:{span:8}},{field:"businessStatus",label:"\u64CD\u4F5C\u72B6\u6001",component:"Select",componentProps:{options:F},colProps:{span:8}}],V=y({name:"OperationLogManagement",components:{BasicTable:f,OperationLogDrawer:h,TableAction:g},setup(){const{t:e}=O(),{hasPermission:t}=Y(),[i,{openDrawer:o}]=_(),[s,{reload:r}]=b({api:x,columns:H,formConfig:{labelWidth:120,schemas:k},pagination:!0,striped:!1,useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,canResize:!1,actionColumn:{width:100,title:e("common.operateText"),dataIndex:"action",slots:{customRender:"action"}}});function a(n){o(!0,{record:n})}function u(n){M(n.id).then(()=>r())}function l(){r()}return{t:e,hasPermission:t,registerTable:s,registerDrawer:i,handleView:a,handleDelete:u,handleSuccess:l}}});function v(e,t,i,o,s,r){const a=c("TableAction"),u=c("BasicTable"),l=c("OperationLogDrawer");return R(),L("div",null,[d(u,{onRegister:e.registerTable},{action:A(({record:n})=>[d(a,{actions:[{icon:"clarity:info-standard-line",tooltip:e.t("common.detailText"),onClick:e.handleView.bind(null,n)},{icon:"ant-design:delete-outlined",color:"error",tooltip:e.t("common.delText"),ifShow:e.hasPermission("sys:operation-log:delete"),popConfirm:{title:e.t("common.delTip"),confirm:e.handleDelete.bind(null,n)}}]},null,8,["actions"])]),_:1},8,["onRegister"]),d(l,{onRegister:e.registerDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}var Ee=P(V,[["render",v]]);export{Ee as default};
