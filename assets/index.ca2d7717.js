import{B as R,u as b}from"./useTable.2dfc64b8.js";import{T}from"./useForm.64137a1f.js";import{u as g}from"./index.29932cc5.js";import C from"./RoleDrawer.6f114595.js";import{c as A,s as y}from"./role.data.bf1749e7.js";import{g as B,d as S}from"./role.fb1ba1ae.js";import{az as k,a as E,c as M,dg as P,aB as i,o as w,h as v,n as r,B as u,j as I,C as N,t as _,k as $}from"./index.c8efd86c.js";import V from"./RoleAssignDrawer.9a8bcb07.js";import"./index.f0acda50.js";import"./index.17fa07c8.js";import"./index.95f8610f.js";import"./index.1cc2df02.js";import"./index.ae0eca88.js";import"./useSize.822cfd2a.js";import"./useWindowSizeFn.569f2c34.js";import"./useContentViewHeight.833d113a.js";import"./ArrowLeftOutlined.8ce689d7.js";import"./index.e7beea07.js";import"./index.b775b83d.js";import"./index.8f1c0509.js";import"./get.a8e0dbdb.js";import"./index.eb75c359.js";import"./FullscreenOutlined.5ec4a1b8.js";import"./index.59448792.js";import"./sortable.esm.c081a59d.js";import"./RedoOutlined.b14ae1e3.js";import"./scrollTo.877bd4fa.js";import"./index.93134645.js";import"./index.8a182ce2.js";import"./index.5bccfa61.js";import"./index.d99ed209.js";import"./_baseIteratee.813ccf6c.js";import"./index.650ee6e3.js";import"./useRefs.76e09c0b.js";import"./download.b01f8fdc.js";import"./index.a13d6ad9.js";import"./index.4c128a7b.js";import"./uniqBy.8070035d.js";import"./index.5f5435f2.js";import"./index.dd1b97a9.js";import"./dict.b085f5a7.js";const F=E({name:"RoleManagement",components:{BasicTable:R,TableAction:T,RoleDrawer:C,RoleAssignDrawer:V},setup(){const{t:e}=M(),{hasPermission:d}=P(),[f,{openDrawer:s}]=g(),[h,{openDrawer:a}]=g(),[l,{reload:n}]=b({title:"\u89D2\u8272\u5217\u8868",api:B,columns:A,formConfig:{labelWidth:120,schemas:y},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,actionColumn:{width:120,title:e("common.operateText"),dataIndex:"action",slots:{customRender:"action"},fixed:void 0}});function m(){a(!0,{isUpdate:!1})}function p(t){a(!0,{record:t,isUpdate:!0})}function c(t){s(!0,{record:t})}function o(t){S(t.id).then(()=>{n()})}function D(){n()}return{t:e,hasPermission:d,registerTable:l,roleAssignDrawer:f,openRoleAssignDrawer:s,registerDrawer:h,handleCreate:m,handleEdit:p,handleAssign:c,handleDelete:o,handleSuccess:D}}});function U(e,d,f,s,h,a){const l=i("a-button"),n=i("TableAction"),m=i("BasicTable"),p=i("RoleDrawer"),c=i("RoleAssignDrawer");return w(),v("div",null,[r(m,{onRegister:e.registerTable},{toolbar:u(()=>[e.hasPermission("sys:role:save")?(w(),I(l,{key:0,type:"primary",onClick:e.handleCreate},{default:u(()=>[N(_(e.t("common.createText")),1)]),_:1},8,["onClick"])):$("",!0)]),action:u(({record:o})=>[r(n,{actions:[{icon:"clarity:assign-user-line",tooltip:e.t("sys.role.assign"),onClick:e.handleAssign.bind(null,o),ifShow:e.hasPermission("sys:role:assign")},{icon:"clarity:note-edit-line",tooltip:e.t("common.editText"),onClick:e.handleEdit.bind(null,o),ifShow:e.hasPermission("sys:role:update")&&o.code!=="ADMIN"&&o.code!=="MEMBER"},{icon:"ant-design:delete-outlined",tooltip:e.t("common.delText"),color:"error",ifShow:e.hasPermission("sys:role:delete")&&o.code!=="ADMIN"&&o.code!=="MEMBER",popConfirm:{title:e.t("common.delTip"),confirm:e.handleDelete.bind(null,o)}}]},null,8,["actions"])]),_:1},8,["onRegister"]),r(p,{onRegister:e.registerDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"]),r(c,{onRegister:e.roleAssignDrawer},null,8,["onRegister"])])}var Se=k(F,[["render",U]]);export{Se as default};
