import{B as V,u as _}from"./useTable.2dfc64b8.js";import{T as E,p as $}from"./useForm.64137a1f.js";import{a as A}from"./index.95f8610f.js";import N from"./DeptTree.a958b8b8.js";import{c as W,s as F}from"./user.data.a34574cf.js";import{az as G,a as Q,aZ as q,c as H,dg as L,w as O,f8 as j,aB as n,o as m,j as g,B as r,n as s,C as c,t as i,k as h,h as z,f9 as K}from"./index.c8efd86c.js";import{u as Z}from"./index.29932cc5.js";import J from"./UserDrawer.e655fb30.js";import{S as X,s as Y}from"./dict.b085f5a7.js";import x from"./QrModal.b4e128f9.js";import{u as v}from"./index.eb75c359.js";import{T as ee}from"./index.8f1c0509.js";import{D as oe}from"./index.59448792.js";import te from"./UnlockModal.569bba20.js";import"./index.f0acda50.js";import"./index.17fa07c8.js";import"./index.e7beea07.js";import"./index.b775b83d.js";import"./get.a8e0dbdb.js";import"./useWindowSizeFn.569f2c34.js";import"./sortable.esm.c081a59d.js";import"./RedoOutlined.b14ae1e3.js";import"./FullscreenOutlined.5ec4a1b8.js";import"./index.ae0eca88.js";import"./useSize.822cfd2a.js";import"./scrollTo.877bd4fa.js";import"./index.93134645.js";import"./index.8a182ce2.js";import"./index.5bccfa61.js";import"./index.d99ed209.js";import"./_baseIteratee.813ccf6c.js";import"./index.650ee6e3.js";import"./useRefs.76e09c0b.js";import"./download.b01f8fdc.js";import"./index.a13d6ad9.js";import"./index.4c128a7b.js";import"./uniqBy.8070035d.js";import"./index.1cc2df02.js";import"./useContentViewHeight.833d113a.js";import"./ArrowLeftOutlined.8ce689d7.js";import"./index.dd1b97a9.js";import"./dept.7d90adee.js";import"./role.fb1ba1ae.js";import"./index.5f5435f2.js";import"./index.e28abc18.js";const ne=Q({name:"UserManagement",components:{UnlockModal:te,UserDrawer:J,QrModal:x,BasicTable:V,PageWrapper:A,DeptTree:N,TableAction:E,Tag:ee,Image:$,Divider:oe},setup(){const e=q(),{t:p}=H(),{hasPermission:M}=L(),[C,{openModal:y}]=v(),[U,{openModal:T}]=v(),[u,{openDrawer:d}]=Z(),a=O({}),[f,{reload:l,updateTableDataRecord:k}]=_({title:p("sys.user.title"),api:j,rowKey:"id",columns:W,formConfig:{labelWidth:120,schemas:F,autoSubmitOnEnter:!0},useSearchForm:!0,showTableSetting:!0,bordered:!0,actionColumn:{width:120,title:p("common.operateText"),dataIndex:"action",slots:{customRender:"action"}}});function b(){d(!0,{isUpdate:!1})}function S(t){d(!0,{record:t,isUpdate:!0})}function w(t){K(t.id).then(()=>l())}function D(t){T(!0,{record:t})}function o(){y()}function B({isUpdate:t,values:R}){t?k(R.id,R):l()}function I(t=""){a.deptId=t,l()}function P(t){e("/sys/user_detail/"+t.id)}return{t:p,hasPermission:M,registerTable:f,qrModal:U,unlockModal:C,openUnlockModal:y,registerDrawer:u,handleCreate:b,handleEdit:S,handleDelete:w,handleGoogleSecret:D,handleSuccess:B,handleSelect:I,handleView:P,handleUnlockModal:o,searchInfo:a,StatusEnum:X,statusDictMap:Y}}}),re=["onClick"];function se(e,p,M,C,y,U){const T=n("DeptTree"),u=n("a-button"),d=n("Image"),a=n("Tag"),f=n("Divider"),l=n("TableAction"),k=n("BasicTable"),b=n("UserDrawer"),S=n("QrModal"),w=n("UnlockModal"),D=n("PageWrapper");return m(),g(D,{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:r(()=>[s(T,{class:"w-1/4 xl:w-1/5",onSelect:e.handleSelect},null,8,["onSelect"]),s(k,{onRegister:e.registerTable,class:"w-3/4 xl:w-4/5",searchInfo:e.searchInfo},{toolbar:r(()=>[e.hasPermission("sys:user:save")?(m(),g(u,{key:0,type:"primary",onClick:e.handleCreate},{default:r(()=>[c(i(e.t("common.createText")),1)]),_:1},8,["onClick"])):h("",!0),e.hasPermission("sys:user:unlock")?(m(),g(u,{key:1,type:"primary",onClick:e.handleUnlockModal},{default:r(()=>[c(i(e.t("sys.user.unlock")),1)]),_:1},8,["onClick"])):h("",!0)]),avatarUrl:r(({text:o})=>[o?(m(),g(d,{key:0,src:o,height:"40px",width:"40px"},null,8,["src"])):h("",!0)]),status:r(({text:o})=>[s(a,{color:o===e.StatusEnum.NORMAL?"blue":"red"},{default:r(()=>[c(i(e.statusDictMap.get(o)),1)]),_:2},1032,["color"])]),googleBind:r(({record:o})=>[s(a,{color:o.googleVerify===!0?"blue":"red"},{default:r(()=>[c(i(o.googleVerify===!0?e.t("sys.user.google.openVerify"):e.t("sys.user.google.closeVerify")),1)]),_:2},1032,["color"]),s(f,{type:"vertical"}),s(a,{color:o.googleBind===!0?"blue":"red"},{default:r(()=>[c(i(o.googleBind===!0?e.t("sys.user.google.bound"):e.t("sys.user.google.unbound")),1)]),_:2},1032,["color"]),s(f,{type:"vertical"}),e.hasPermission("sys:user:google-secret")?(m(),z("a",{key:0,onClick:B=>e.handleGoogleSecret(o)},i(e.t("common.detailText")),9,re)):h("",!0)]),action:r(({record:o})=>[s(l,{actions:[{icon:"clarity:info-standard-line",tooltip:e.t("common.detailText"),onClick:e.handleView.bind(null,o)},{icon:"clarity:note-edit-line",tooltip:e.t("common.editText"),onClick:e.handleEdit.bind(null,o),ifShow:e.hasPermission("sys:user:update")},{icon:"ant-design:delete-outlined",color:"error",tooltip:e.t("common.delText"),ifShow:e.hasPermission("sys:user:delete"),popConfirm:{title:e.t("common.delTip"),confirm:e.handleDelete.bind(null,o)}}]},null,8,["actions"])]),_:1},8,["onRegister","searchInfo"]),s(b,{onRegister:e.registerDrawer,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"]),s(S,{onRegister:e.qrModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"]),s(w,{onRegister:e.unlockModal},null,8,["onRegister"])]),_:1})}var Xe=G(ne,[["render",se]]);export{Xe as default};
