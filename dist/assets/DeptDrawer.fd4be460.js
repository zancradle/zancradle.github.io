var A=Object.defineProperty;var f=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var E=(t,a,e)=>a in t?A(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,D=(t,a)=>{for(var e in a||(a={}))_.call(a,e)&&E(t,e,a[e]);if(f)for(var e of f(a))C.call(a,e)&&E(t,e,a[e]);return t};var m=(t,a,e)=>new Promise((u,n)=>{var s=r=>{try{i(e.next(r))}catch(c){n(c)}},l=r=>{try{i(e.throw(r))}catch(c){n(c)}},i=r=>r.done?u(r.value):Promise.resolve(r.value).then(s,l);i((e=e.apply(t,a)).next())});import{B as y,a as k}from"./index.29932cc5.js";import{B as v,n as x}from"./useForm.64137a1f.js";import{c as S,g as P,u as T,s as $}from"./dept.7d90adee.js";import{az as N,a as R,v as F,f as O,i as p,aB as w,o as U,j as L,B as V,n as j,aC as q}from"./index.c8efd86c.js";const Y=[{title:"\u90E8\u95E8\u540D\u79F0",dataIndex:"name",fixed:"left",width:180},{title:"\u4E0A\u7EA7\u90E8\u95E8",dataIndex:"parentName",ellipsis:!0},{title:"\u8054\u7CFB\u4EBA",dataIndex:"contactUser",width:120},{title:"\u8054\u7CFB\u7535\u8BDD",dataIndex:"telephone",width:180},{title:"\u6392\u5E8F",dataIndex:"sort",width:80},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",ellipsis:!0},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"updateTime",ellipsis:!0},{title:"\u5907\u6CE8",dataIndex:"remarks"}],Z=[{field:"name",label:"\u90E8\u95E8\u540D\u79F0",component:"Input",colProps:{span:8}}],z=[{field:"id",label:"id",component:"Input",ifShow:!1},{field:"name",label:"\u90E8\u95E8\u540D\u79F0",component:"Input",dynamicRules:({values:t})=>[{required:!0,message:"\u90E8\u95E8\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",whitespace:!0},{min:1,max:50,message:"\u90E8\u95E8\u540D\u79F0\u957F\u5EA61-50"},{validator(a,e){return new Promise((u,n)=>{if(!(e&&e.trim())){u();return}S(t.id===void 0?null:t.id,e).then(s=>{s?u():n("\u90E8\u95E8\u540D\u79F0\u5DF2\u5B58\u5728")}).catch(s=>{n(s.message||"\u9A8C\u8BC1\u5931\u8D25")})})},trigger:"blur"}]},{field:"parentId",label:"\u4E0A\u7EA7\u90E8\u95E8",component:"TreeSelect",componentProps:{fieldNames:{label:"title",key:"key",value:"key"},getPopupContainer:()=>document.body}},{field:"contactUser",label:"\u8054\u7CFB\u4EBA",component:"Input"},{field:"telephone",label:"\u8054\u7CFB\u7535\u8BDD",component:"Input"},{field:"sort",label:"\u6392\u5E8F",component:"InputNumber",required:!0},{label:"\u5907\u6CE8",field:"remarks",component:"InputTextArea"}],G=R({name:"DeptDrawer",components:{BasicDrawer:y,BasicForm:v},emits:["success","register"],setup(t,{emit:a}){const e=F(""),u=F(!0),[n,{resetFields:s,setFieldsValue:l,updateSchema:i,clearValidate:r,validate:c}]=x({labelWidth:100,schemas:z,showActionButtonGroup:!1}),[g,{setDrawerProps:d,closeDrawer:B}]=k(o=>m(this,null,function*(){yield s(),d({confirmLoading:!1}),u.value=!!(o!=null&&o.isUpdate);const b=yield P();yield i({field:"parentId",componentProps:{treeData:b}}),p(u)&&(e.value=o.record.id,yield l(D({},o.record)),yield r())})),h=O(()=>p(u)?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8");function I(){return m(this,null,function*(){try{const o=yield c();d({confirmLoading:!0}),p(u)?(o.id=e.value,yield T(o)):yield $(o),B(),a("success")}finally{d({confirmLoading:!1})}})}return{registerDrawer:g,registerForm:n,getTitle:h,handleSubmit:I}}});function M(t,a,e,u,n,s){const l=w("BasicForm"),i=w("BasicDrawer");return U(),L(i,q(t.$attrs,{onRegister:t.registerDrawer,showFooter:"",title:t.getTitle,width:"50%",onOk:t.handleSubmit}),{default:V(()=>[j(l,{onRegister:t.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var W=N(G,[["render",M]]),ee=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as D,ee as a,Y as c,Z as s};
