var y=Object.defineProperty;var B=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var D=(r,t,e)=>t in r?y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,v=(r,t)=>{for(var e in t||(t={}))T.call(t,e)&&D(r,e,t[e]);if(B)for(var e of B(t))$.call(t,e)&&D(r,e,t[e]);return r};var d=(r,t,e)=>new Promise((n,m)=>{var l=o=>{try{i(e.next(o))}catch(s){m(s)}},p=o=>{try{i(e.throw(o))}catch(s){m(s)}},i=o=>o.done?n(o.value):Promise.resolve(o.value).then(l,p);i((e=e.apply(r,t)).next())});import{B as b,n as C}from"./useForm.64137a1f.js";import{f as U}from"./role.data.bf1749e7.js";import{B as I,a as L}from"./index.29932cc5.js";import{_ as P}from"./index.dd1b97a9.js";import{az as S,a as V,v as w,f as N,i as f,aB as g,o as O,j,B as _,n as h,aC as z,f7 as A}from"./index.c8efd86c.js";import{a as E,u as G,s as M}from"./role.fb1ba1ae.js";import"./index.5bccfa61.js";import"./index.d99ed209.js";import"./_baseIteratee.813ccf6c.js";import"./get.a8e0dbdb.js";import"./useSize.822cfd2a.js";import"./index.59448792.js";import"./index.f0acda50.js";import"./index.8f1c0509.js";import"./index.e7beea07.js";import"./index.b775b83d.js";import"./index.650ee6e3.js";import"./index.17fa07c8.js";import"./index.eb75c359.js";import"./useWindowSizeFn.569f2c34.js";import"./FullscreenOutlined.5ec4a1b8.js";import"./useRefs.76e09c0b.js";import"./download.b01f8fdc.js";import"./index.a13d6ad9.js";import"./index.4c128a7b.js";import"./uniqBy.8070035d.js";import"./dict.b085f5a7.js";import"./index.5f5435f2.js";import"./ArrowLeftOutlined.8ce689d7.js";const W=V({name:"RoleDrawer",components:{BasicDrawer:I,BasicForm:b,BasicTree:P},emits:["success","register"],setup(r,{emit:t}){const e=w(!0),n=w([]),m=w(""),[l,{resetFields:p,setFieldsValue:i,clearValidate:o,validate:s}]=C({labelWidth:100,schemas:U,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[u,{setDrawerProps:c,closeDrawer:F}]=L(a=>d(this,null,function*(){yield p(),c({confirmLoading:!1}),f(n).length===0&&(n.value=yield A(0)),e.value=!!(a!=null&&a.isUpdate),f(e)&&(yield i(v({},yield E(a.record.id))),yield o(),m.value=a.record.id)})),R=N(()=>f(e)?"\u7F16\u8F91\u89D2\u8272":"\u65B0\u589E\u89D2\u8272");function k(){return d(this,null,function*(){try{const a=yield s();c({confirmLoading:!0}),f(e)?(a.id=m.value,yield G(a)):yield M(a),F(),t("success")}finally{c({confirmLoading:!1})}})}return{getTitle:R,treeData:n,registerDrawer:u,registerForm:l,handleSubmit:k}}});function q(r,t,e,n,m,l){const p=g("BasicTree"),i=g("BasicForm"),o=g("BasicDrawer");return O(),j(o,z(r.$attrs,{onRegister:r.registerDrawer,showFooter:"",title:r.getTitle,width:"50%",onOk:r.handleSubmit}),{default:_(()=>[h(i,{onRegister:r.registerForm},{menu:_(({model:s,field:u})=>[h(p,{value:s[u],"onUpdate:value":c=>s[u]=c,treeData:r.treeData,fieldNames:{title:"title",key:"key"},checkable:""},null,8,["value","onUpdate:value","treeData"])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var Fe=S(W,[["render",q]]);export{Fe as default};
