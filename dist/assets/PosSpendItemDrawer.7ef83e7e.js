var x=Object.defineProperty;var g=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var b=(e,n,t)=>n in e?x(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,w=(e,n)=>{for(var t in n||(n={}))D.call(n,t)&&b(e,t,n[t]);if(g)for(var t of g(n))P.call(n,t)&&b(e,t,n[t]);return e};var I=(e,n,t)=>new Promise((r,d)=>{var m=o=>{try{p(t.next(o))}catch(l){d(l)}},i=o=>{try{p(t.throw(o))}catch(l){d(l)}},p=o=>o.done?r(o.value):Promise.resolve(o.value).then(m,i);p((t=t.apply(e,n)).next())});import{B as v,n as T}from"./useForm.64137a1f.js";import{c as h,e9 as u,ea as M,az as k,a as C,v as N,f as O,i as f,aB as B,o as R,j as $,B as L,n as U,aC as j}from"./index.c8efd86c.js";import{B as A,a as E}from"./index.29932cc5.js";const{t:s}=h(),Z=[{title:s("pos.spendItem.spendId"),dataIndex:"spendId",ellipsis:!0},{title:s("pos.spendItem.name"),dataIndex:"name",ellipsis:!0},{title:s("pos.spendItem.price"),dataIndex:"price",ellipsis:!0},{title:s("pos.spendItem.num"),dataIndex:"num",ellipsis:!0},{title:s("pos.spendItem.subtotal"),dataIndex:"subtotal",ellipsis:!0},{title:s("pos.spendItem.remarks"),dataIndex:"remarks",ellipsis:!0},{title:s("pos.spendItem.createTime"),dataIndex:"createTime",ellipsis:!0},{title:s("pos.spendItem.updateTime"),dataIndex:"updateTime",ellipsis:!0},{title:s("pos.spendItem.createBy"),dataIndex:"createBy",ellipsis:!0},{title:s("pos.spendItem.updateBy"),dataIndex:"updateBy",ellipsis:!0},{title:s("pos.spendItem.status"),dataIndex:"status",ellipsis:!0},{title:s("pos.spendItem.deleted"),dataIndex:"deleted",ellipsis:!0}],ee=[{field:"spendId",label:s("pos.spendItem.spendId"),component:"InputNumber",colProps:{span:8}}],z=[{field:"spendId",label:s("pos.spendItem.spendId"),component:"InputNumber"},{field:"name",label:s("pos.spendItem.name"),component:"Input"},{field:"price",label:s("pos.spendItem.price"),component:"InputNumber"},{field:"num",label:s("pos.spendItem.num"),component:"InputNumber"},{field:"subtotal",label:s("pos.spendItem.subtotal"),component:"InputNumber"},{field:"remarks",label:s("pos.spendItem.remarks"),component:"Input"}];function te(e){return u.post({url:"/pos/spend-item/query",params:e},{errorMessageMode:"message"})}function V(e){return u.post({url:"/pos/spend-item/save",params:e},{errorMessageMode:"message"})}function q(e){return u.post({url:"/pos/spend-item/update",params:e},{errorMessageMode:"message"})}function se(e){return u.delete({url:"/pos/spend-item/delete",headers:{"Content-Type":M.FORM_URLENCODED},params:{id:e}},{errorMessageMode:"message"})}const G=C({name:"PosSpendItemDrawer",components:{BasicDrawer:A,BasicForm:v},emits:["success","register"],setup(e,{emit:n}){const{t}=h(),r=N(!0);let d;const[m,{resetFields:i,setFieldsValue:p,removeSchemaByFiled:o,validate:l}]=T({labelWidth:100,schemas:z,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[y,{setDrawerProps:c,closeDrawer:F}]=E(a=>I(this,null,function*(){yield i(),c({confirmLoading:!1}),r.value=!!(a!=null&&a.isUpdate),f(r)&&(yield o(["id","tenantId"]),yield p(w({},a.record)),d=a.record.id)})),S=O(()=>f(r)?t("common.editText"):t("common.createText"));function _(){return I(this,null,function*(){try{const a=yield l();c({confirmLoading:!0}),f(r)?(a.id=d,yield q(a)):yield V(a),F(),n("success")}finally{c({confirmLoading:!1})}})}return{registerDrawer:y,registerForm:m,getTitle:S,handleSubmit:_}}});function H(e,n,t,r,d,m){const i=B("BasicForm"),p=B("BasicDrawer");return R(),$(p,j(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:L(()=>[U(i,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var W=k(G,[["render",H]]),ne=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as P,ne as a,Z as c,se as d,te as g,ee as s};
