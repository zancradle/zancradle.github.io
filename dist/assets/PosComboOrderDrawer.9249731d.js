var C=Object.defineProperty;var O=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var I=(o,t,r)=>t in o?C(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,g=(o,t)=>{for(var r in t||(t={}))h.call(t,r)&&I(o,r,t[r]);if(O)for(var r of O(t))y.call(t,r)&&I(o,r,t[r]);return o};var b=(o,t,r)=>new Promise((a,l)=>{var c=s=>{try{d(r.next(s))}catch(i){l(i)}},m=s=>{try{d(r.throw(s))}catch(i){l(i)}},d=s=>s.done?a(s.value):Promise.resolve(s.value).then(c,m);d((r=r.apply(o,t)).next())});import{B as F,n as _}from"./useForm.64137a1f.js";import{c as w,e9 as p,ea as D,az as S,a as v,v as M,f as T,i as f,aB as N,o as R,j as $,B as L,n as U,aC as k}from"./index.c8efd86c.js";import{B as j,a as E}from"./index.29932cc5.js";const{t:e}=w(),Z=[{title:e("pos.comboOrder.userId"),dataIndex:"userId",ellipsis:!0},{title:e("pos.comboOrder.username"),dataIndex:"username",ellipsis:!0},{title:e("pos.comboOrder.mobile"),dataIndex:"mobile",ellipsis:!0},{title:e("pos.comboOrder.orderNo"),dataIndex:"orderNo",ellipsis:!0},{title:e("pos.comboOrder.orderSource"),dataIndex:"orderSource",ellipsis:!0},{title:e("pos.comboOrder.orderAmount"),dataIndex:"orderAmount",ellipsis:!0},{title:e("pos.comboOrder.actualAmount"),dataIndex:"actualAmount",ellipsis:!0},{title:e("pos.comboOrder.discountedAmount"),dataIndex:"discountedAmount",ellipsis:!0},{title:e("pos.comboOrder.usedPoints"),dataIndex:"usedPoints",ellipsis:!0},{title:e("pos.comboOrder.pointAmount"),dataIndex:"pointAmount",ellipsis:!0},{title:e("pos.comboOrder.tableNo"),dataIndex:"tableNo",ellipsis:!0},{title:e("pos.comboOrder.comboNum"),dataIndex:"comboNum",ellipsis:!0},{title:e("pos.comboOrder.createTime"),dataIndex:"createTime",ellipsis:!0},{title:e("pos.comboOrder.createBy"),dataIndex:"createBy",ellipsis:!0}],ee=[{field:"userId",label:e("pos.comboOrder.userId"),component:"InputNumber",colProps:{span:8}},{field:"username",label:e("pos.comboOrder.username"),component:"Input",colProps:{span:8}},{field:"mobile",label:e("pos.comboOrder.mobile"),component:"Input",colProps:{span:8}},{field:"orderNo",label:e("pos.comboOrder.orderNo"),component:"Input",colProps:{span:8}},{field:"orderSource",label:e("pos.comboOrder.orderSource"),component:"InputNumber",colProps:{span:8}},{field:"createBy",label:e("pos.comboOrder.createBy"),component:"Input",colProps:{span:8}}],z=[{field:"userId",label:e("pos.comboOrder.userId"),component:"InputNumber"},{field:"username",label:e("pos.comboOrder.username"),component:"Input"},{field:"mobile",label:e("pos.comboOrder.mobile"),component:"Input"},{field:"orderNo",label:e("pos.comboOrder.orderNo"),component:"Input"},{field:"orderSource",label:e("pos.comboOrder.orderSource"),component:"InputNumber"},{field:"orderAmount",label:e("pos.comboOrder.orderAmount"),component:"InputNumber"},{field:"actualAmount",label:e("pos.comboOrder.actualAmount"),component:"InputNumber"},{field:"discountedAmount",label:e("pos.comboOrder.discountedAmount"),component:"InputNumber"},{field:"usedPoints",label:e("pos.comboOrder.usedPoints"),component:"InputNumber"},{field:"pointAmount",label:e("pos.comboOrder.pointAmount"),component:"InputNumber"},{field:"tableNo",label:e("pos.comboOrder.tableNo"),component:"Input"},{field:"comboNum",label:e("pos.comboOrder.comboNum"),component:"InputNumber"}];function oe(o){return p.post({url:"/pos/combo-order/query",params:o},{errorMessageMode:"message"})}function V(o){return p.post({url:"/pos/combo-order/save",params:o},{errorMessageMode:"message"})}function q(o){return p.post({url:"/pos/combo-order/update",params:o},{errorMessageMode:"message"})}function re(o){return p.delete({url:"/pos/combo-order/delete",headers:{"Content-Type":D.FORM_URLENCODED},params:{id:o}},{errorMessageMode:"message"})}const G=v({name:"PosComboOrderDrawer",components:{BasicDrawer:j,BasicForm:F},emits:["success","register"],setup(o,{emit:t}){const{t:r}=w(),a=M(!0);let l;const[c,{resetFields:m,setFieldsValue:d,removeSchemaByFiled:s,validate:i}]=_({labelWidth:100,schemas:z,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[P,{setDrawerProps:u,closeDrawer:A}]=E(n=>b(this,null,function*(){yield m(),u({confirmLoading:!1}),a.value=!!(n!=null&&n.isUpdate),f(a)&&(yield s(["id","tenantId"]),yield d(g({},n.record)),l=n.record.id)})),B=T(()=>f(a)?r("common.editText"):r("common.createText"));function x(){return b(this,null,function*(){try{const n=yield i();u({confirmLoading:!0}),f(a)?(n.id=l,yield q(n)):yield V(n),A(),t("success")}finally{u({confirmLoading:!1})}})}return{registerDrawer:P,registerForm:c,getTitle:B,handleSubmit:x}}});function H(o,t,r,a,l,c){const m=N("BasicForm"),d=N("BasicDrawer");return R(),$(d,k(o.$attrs,{onRegister:o.registerDrawer,showFooter:"",title:o.getTitle,width:"50%",onOk:o.handleSubmit}),{default:L(()=>[U(m,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var W=S(G,[["render",H]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as P,te as a,Z as c,re as d,oe as g,ee as s};
