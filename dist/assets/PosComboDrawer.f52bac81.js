var F=Object.defineProperty;var g=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var w=(e,t,o)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,I=(e,t)=>{for(var o in t||(t={}))_.call(t,o)&&w(e,o,t[o]);if(g)for(var o of g(t))v.call(t,o)&&w(e,o,t[o]);return e};var b=(e,t,o)=>new Promise((n,i)=>{var p=a=>{try{c(o.next(a))}catch(l){i(l)}},m=a=>{try{c(o.throw(a))}catch(l){i(l)}},c=a=>a.done?n(a.value):Promise.resolve(a.value).then(p,m);c((o=o.apply(e,t)).next())});import{B as x,n as M}from"./useForm.64137a1f.js";import{c as D,e9 as d,ea as T,az as N,a as S,v as R,f as O,i as f,aB as B,o as $,j as L,B as U,n as k,aC as j}from"./index.c8efd86c.js";import{s as A}from"./dict.b085f5a7.js";import{B as E,a as z}from"./index.29932cc5.js";const{t:s}=D(),oe=[{title:s("pos.combo.comboName"),dataIndex:"comboName",ellipsis:!0},{title:s("pos.combo.comboImage"),dataIndex:"comboImage",ellipsis:!0},{title:s("pos.combo.comboDescription"),dataIndex:"comboDescription",ellipsis:!0},{title:s("pos.combo.comboPrice"),dataIndex:"comboPrice",ellipsis:!0,sorter:!0},{title:s("pos.combo.createTime"),dataIndex:"createTime",ellipsis:!0},{title:s("pos.combo.updateTime"),dataIndex:"updateTime",ellipsis:!0},{title:s("pos.combo.createBy"),dataIndex:"createBy",ellipsis:!0},{title:s("pos.combo.updateBy"),dataIndex:"updateBy",ellipsis:!0},{title:s("pos.combo.status"),dataIndex:"status",ellipsis:!0,customRender:({record:e})=>{const t=e.status;return A.get(t)}}],te=[{field:"comboName",label:s("pos.combo.comboName"),component:"Input",colProps:{span:8}},{field:"status",label:s("pos.combo.status"),component:"Select",colProps:{span:8}}],V=[{field:"comboName",label:s("pos.combo.comboName"),component:"Input"},{field:"comboImage",label:s("pos.combo.comboImage"),component:"Input"},{field:"comboDescription",label:s("pos.combo.comboDescription"),component:"Input"},{field:"comboPrice",label:s("pos.combo.comboPrice"),component:"InputNumber"}];function se(e){return d.post({url:"/pos/combo/query",params:e},{errorMessageMode:"message"})}function q(e){return d.post({url:"/pos/combo/save",params:e},{errorMessageMode:"message"})}function G(e){return d.post({url:"/pos/combo/update",params:e},{errorMessageMode:"message"})}function ae(e){return d.delete({url:"/pos/combo/delete",headers:{"Content-Type":T.FORM_URLENCODED},params:{id:e}},{errorMessageMode:"message"})}const H=S({name:"PosComboDrawer",components:{BasicDrawer:E,BasicForm:x},emits:["success","register"],setup(e,{emit:t}){const{t:o}=D(),n=R(!0);let i;const[p,{resetFields:m,setFieldsValue:c,removeSchemaByFiled:a,validate:l}]=M({labelWidth:100,schemas:V,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[P,{setDrawerProps:u,closeDrawer:C}]=z(r=>b(this,null,function*(){yield m(),u({confirmLoading:!1}),n.value=!!(r!=null&&r.isUpdate),f(n)&&(yield a(["id","tenantId"]),yield c(I({},r.record)),i=r.record.id)})),h=O(()=>f(n)?o("common.editText"):o("common.createText"));function y(){return b(this,null,function*(){try{const r=yield l();u({confirmLoading:!0}),f(n)?(r.id=i,yield G(r)):yield q(r),C(),t("success")}finally{u({confirmLoading:!1})}})}return{registerDrawer:P,registerForm:p,getTitle:h,handleSubmit:y}}});function W(e,t,o,n,i,p){const m=B("BasicForm"),c=B("BasicDrawer");return $(),L(c,j(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:U(()=>[k(m,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var J=N(H,[["render",W]]),re=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{J as P,re as a,oe as c,ae as d,se as g,te as s};
