import{e9 as y,az as D,a as T,c as C,u as h,dg as M,v as c,aB as l,o as R,j as F,B as p,n as f,C as K,t as P,i as k,G as I}from"./index.c8efd86c.js";import{a as $}from"./index.95f8610f.js";import{_ as b}from"./index.dd1b97a9.js";import"./index.1cc2df02.js";import"./index.ae0eca88.js";import"./useSize.822cfd2a.js";import"./useWindowSizeFn.569f2c34.js";import"./useContentViewHeight.833d113a.js";import"./ArrowLeftOutlined.8ce689d7.js";import"./index.17fa07c8.js";import"./index.59448792.js";import"./get.a8e0dbdb.js";function g(e){return y.get({url:"/sys/region/tree/"+e},{errorMessageMode:"message"})}function x(){return y.post({url:"/sys/region/sync"},{errorMessageMode:"message"})}const E=T({name:"RegionManagement",components:{BasicTree:b,PageWrapper:$},setup(){const{t:e}=C();h();const{createMessage:d}=I(),{hasPermission:m}=M(),o=c(null),r=c([]),n=c(!1);function s(){return"clarity:building-line"}function u(){x().then(()=>{n.value=!0,d.success("\u540C\u6B65\u6210\u529F\uFF0C\u7A0D\u540E\u8BF7\u91CD\u65B0\u83B7\u53D6\u6700\u65B0\u7684\u6570\u636E"),n.value=!1})}function i(){try{n.value=!0,g(0).then(t=>{r.value=t})}finally{n.value=!1}}function B(t){return new Promise(_=>{const a=k(o);if(a)try{n.value=!0,g(t.eventKey).then(v=>{a.updateNodeByKey(t.eventKey,{children:v}),a.setExpandedKeys([t.eventKey,...a.getExpandedKeys()])})}finally{n.value=!1}_()})}return{t:e,tree:r,asyncTreeRef:o,treeLoading:n,renderIcon:s,syncRegion:u,loadTreeData:i,onLoadData:B,hasPermission:m}},mounted(){this.loadTreeData()}});function L(e,d,m,o,r,n){const s=l("a-button"),u=l("BasicTree"),i=l("PageWrapper");return R(),F(i,{contentBackground:""},{extra:p(()=>[f(s,{type:"primary",onClick:e.syncRegion},{default:p(()=>[K(P(e.t("common.syncText")),1)]),_:1},8,["onClick"])]),default:p(()=>[f(u,{title:"\u884C\u653F\u533A\u57DF",renderIcon:e.renderIcon,ref:"asyncTreeRef",treeData:e.tree,loading:e.treeLoading,"load-data":e.onLoadData},null,8,["renderIcon","treeData","loading","load-data"])]),_:1})}var O=D(E,[["render",L]]);export{O as default};
