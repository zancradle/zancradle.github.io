var B=Object.defineProperty;var f=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var g=(e,t,o)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,O=(e,t)=>{for(var o in t||(t={}))F.call(t,o)&&g(e,o,t[o]);if(f)for(var o of f(t))_.call(t,o)&&g(e,o,t[o]);return e};var u=(e,t,o)=>new Promise((a,c)=>{var l=s=>{try{n(o.next(s))}catch(d){c(d)}},i=s=>{try{n(o.throw(s))}catch(d){c(d)}},n=s=>s.done?a(s.value):Promise.resolve(s.value).then(l,i);n((o=o.apply(e,t)).next())});import{B as v,n as y}from"./useForm.64137a1f.js";import{c as D,e9 as p,ea as M,az as x,a as S,v as T,f as R,i as I,aB as w,o as $,j as L,B as U,n as k,aC as j}from"./index.c8efd86c.js";import{B as A,a as E}from"./index.29932cc5.js";const{t:r}=D(),Z=[{title:r("pos.comboOrderItem.orderId"),dataIndex:"orderId",ellipsis:!0},{title:r("pos.comboOrderItem.comboId"),dataIndex:"comboId",ellipsis:!0},{title:r("pos.comboOrderItem.comboName"),dataIndex:"comboName",ellipsis:!0},{title:r("pos.comboOrderItem.comboImage"),dataIndex:"comboImage",ellipsis:!0},{title:r("pos.comboOrderItem.comboDescription"),dataIndex:"comboDescription",ellipsis:!0},{title:r("pos.comboOrderItem.comboPrice"),dataIndex:"comboPrice",ellipsis:!0},{title:r("pos.comboOrderItem.comboNum"),dataIndex:"comboNum",ellipsis:!0},{title:r("pos.comboOrderItem.subtotal"),dataIndex:"subtotal",ellipsis:!0}],ee=[{field:"orderId",label:r("pos.comboOrderItem.orderId"),component:"InputNumber",colProps:{span:8}}],z=[{field:"orderId",label:r("pos.comboOrderItem.orderId"),component:"InputNumber"},{field:"comboId",label:r("pos.comboOrderItem.comboId"),component:"InputNumber"},{field:"comboName",label:r("pos.comboOrderItem.comboName"),component:"Input"},{field:"comboImage",label:r("pos.comboOrderItem.comboImage"),component:"Input"},{field:"comboDescription",label:r("pos.comboOrderItem.comboDescription"),component:"Input"},{field:"comboPrice",label:r("pos.comboOrderItem.comboPrice"),component:"InputNumber"},{field:"comboNum",label:r("pos.comboOrderItem.comboNum"),component:"InputNumber"},{field:"subtotal",label:r("pos.comboOrderItem.subtotal"),component:"InputNumber"}];function oe(e){return p.post({url:"/pos/combo-order-item/query",params:e},{errorMessageMode:"message"})}function V(e){return p.post({url:"/pos/combo-order-item/save",params:e},{errorMessageMode:"message"})}function q(e){return p.post({url:"/pos/combo-order-item/update",params:e},{errorMessageMode:"message"})}function re(e){return p.delete({url:"/pos/combo-order-item/delete",headers:{"Content-Type":M.FORM_URLENCODED},params:{id:e}},{errorMessageMode:"message"})}const G=S({name:"PosComboOrderItemDrawer",components:{BasicDrawer:A,BasicForm:v},emits:["success","register"],setup(e,{emit:t}){const{t:o}=D(),a=T(!0);let c;const[l,{resetFields:i,setFieldsValue:n,removeSchemaByFiled:s,validate:d}]=y({labelWidth:100,schemas:z,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[P,{setDrawerProps:b,closeDrawer:N}]=E(m=>u(this,null,function*(){yield i(),b({confirmLoading:!1}),a.value=!!(m!=null&&m.isUpdate),I(a)&&(yield s(["id","tenantId"]),yield n(O({},m.record)),c=m.record.id)})),C=R(()=>I(a)?o("common.editText"):o("common.createText"));function h(){return u(this,null,function*(){try{const m=yield d();b({confirmLoading:!0}),I(a)?(m.id=c,yield q(m)):yield V(m),N(),t("success")}finally{b({confirmLoading:!1})}})}return{registerDrawer:P,registerForm:l,getTitle:C,handleSubmit:h}}});function H(e,t,o,a,c,l){const i=w("BasicForm"),n=w("BasicDrawer");return $(),L(n,j(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:U(()=>[k(i,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var W=x(G,[["render",H]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as P,te as a,Z as c,re as d,oe as g,ee as s};
